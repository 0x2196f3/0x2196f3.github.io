<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Openwrt on 0x2196f3's blog</title><link>/tags/openwrt/</link><description>0x2196f3's blog (Openwrt)</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Tue, 30 Dec 2025 00:00:00 +0000</lastBuildDate><atom:link href="/tags/openwrt/index.xml" rel="self" type="application/rss+xml"/><item><title>Xiaomi AX6000刷OpenWRT</title><link>/posts/xiaomi-ax6000-openwrt/</link><pubDate>Tue, 30 Dec 2025 00:00:00 +0000</pubDate><guid>/posts/xiaomi-ax6000-openwrt/</guid><description>&lt;h1 id="已知问题" >
&lt;div>
&lt;a href="#%e5%b7%b2%e7%9f%a5%e9%97%ae%e9%a2%98">
##
&lt;/a>
已知问题
&lt;/div>
&lt;/h1>
&lt;h2 id="openwrt-25120-rc1已知问题" >
&lt;div>
&lt;a href="#openwrt-25120-rc1%e5%b7%b2%e7%9f%a5%e9%97%ae%e9%a2%98">
#
&lt;/a>
OpenWRT 25.12.0-rc1已知问题
&lt;/div>
&lt;/h2>
&lt;ul>
&lt;li>5Ghz Wifi,信道选auto无法启动,需要手动设置信道为36&lt;/li>
&lt;li>5Ghz Wifi即使开启160mhz也无法协商到超过1200mbps,测速跑不满千兆,对无线速度有要求就再等等&lt;/li>
&lt;li>虽然路由器有128mb闪存,但OpenWRT可用容量仅60mb&lt;/li>
&lt;li>内存占用异常:不装任何插件内存占用300mb+(正常情况下512mb内存应该占用200mb左右)&lt;/li>
&lt;/ul>
&lt;h2 id="路由器自身的问题" >
&lt;div>
&lt;a href="#%e8%b7%af%e7%94%b1%e5%99%a8%e8%87%aa%e8%ba%ab%e7%9a%84%e9%97%ae%e9%a2%98">
#
&lt;/a>
路由器自身的问题
&lt;/div>
&lt;/h2>
&lt;ul>
&lt;li>这款路由器三个千兆网口共享1G带宽,无线/有线都基本不可能跑满2.5G,不建议为了能刷机购买.见&lt;a href="https://www.acwifi.net/12621.html">acwifi评测&lt;/a>&lt;/li>
&lt;li>IPQ5018处理器性能较弱(双核1GHZ A53,相当于不到半个NanoPi R2s软路由),且OpenWRT不支持硬件NAT加速,不建议用于拨号/翻墙&lt;/li>
&lt;/ul>
&lt;h1 id="刷机步骤" >
&lt;div>
&lt;a href="#%e5%88%b7%e6%9c%ba%e6%ad%a5%e9%aa%a4">
##
&lt;/a>
刷机步骤
&lt;/div>
&lt;/h1>
&lt;h2 id="1降级到1055" >
&lt;div>
&lt;a href="#1%e9%99%8d%e7%ba%a7%e5%88%b01055">
#
&lt;/a>
1.降级到1.0.55
&lt;/div>
&lt;/h2>
&lt;p>&lt;a href="https://mirom.ezbox.idv.tw/miwifi/RA72/roms-stable/">Xiaomi AX6000历史固件下载&lt;/a>&lt;br>
实测最新稳定版(1.0.122)可以直接降级到1.0.55&lt;/p>
&lt;h2 id="2使用xmir-patcher解锁ssh" >
&lt;div>
&lt;a href="#2%e4%bd%bf%e7%94%a8xmir-patcher%e8%a7%a3%e9%94%81ssh">
#
&lt;/a>
2.使用&lt;a href="https://github.com/openwrt-xiaomi/xmir-patcher">xmir-patcher&lt;/a>解锁ssh
&lt;/div>
&lt;/h2>
&lt;ul>
&lt;li>网上搜到的教程解锁ssh需要装OpenWRT虚拟机开无线热点,现在xmir-patcher开箱即用,不需要管理员权限,可以自动获取sn/计算root密码/开启ssh/备份固件/刷机&amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>下载并解压&lt;a href="https://github.com/openwrt-xiaomi/xmir-patcher/archive/refs/heads/main.zip">源码.zip&lt;/a>,点击&lt;code>run.bat&lt;/code>
双击&lt;code>run.bat&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmd" data-lang="cmd">&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>==========================================================
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Xiaomi MiR Patcher
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1 - Set IP-address (current value: 192.168.31.1)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 2 - Connect to device (install exploit)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 3 - Read full device info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 4 - Create full backup
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 5 - Install EN/RU languages
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 6 - Install permanent SSH
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 7 - Install firmware (from directory &lt;span style="color:#e6db74">&amp;#34;firmware&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 8 - {{{ Other functions }}}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 9 - [[ Reboot device ]]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0 - Exit
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Select:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>选2 解锁ssh&lt;/p>
&lt;h2 id="3备份" >
&lt;div>
&lt;a href="#3%e5%a4%87%e4%bb%bd">
#
&lt;/a>
3.备份
&lt;/div>
&lt;/h2>
&lt;p>选4 备份闪存内容,刷回原版有用,但变砖可能要拆机救&lt;br>
选6 固化ssh&lt;/p>
&lt;h2 id="4下载openwrt固件" >
&lt;div>
&lt;a href="#4%e4%b8%8b%e8%bd%bdopenwrt%e5%9b%ba%e4%bb%b6">
#
&lt;/a>
4.下载Openwrt固件
&lt;/div>
&lt;/h2>
&lt;p>&lt;a href="https://firmware-selector.openwrt.org/">openwrt firmware-selector&lt;/a>
选择Xiaomi AX6000, 25.12.x&lt;/p>
&lt;p>下载第一个&lt;strong>SYSTEMUPGRADE&lt;/strong> (xxx-squashfs-sysupgrade.bin)&lt;br>
和第三个&lt;strong>INITRAMFS-FACTORY&lt;/strong> (xxx-initramfs-factory.ubi)&lt;/p>
&lt;h2 id="5刷机" >
&lt;div>
&lt;a href="#5%e5%88%b7%e6%9c%ba">
#
&lt;/a>
5.刷机
&lt;/div>
&lt;/h2>
&lt;p>将&lt;code>...-initramfs-factory.ubi&lt;/code>放入&lt;code>./xmir-patcher-main/firmware&lt;/code>&lt;/p>
&lt;p>选7 刷机&lt;/p>
&lt;ul>
&lt;li>OpenWRT默认不开启WIFI,必须连网线&lt;/li>
&lt;li>OpenWRT默认ip是&lt;code>192.168.1.1&lt;/code>,首次开机不要接上游避免ip冲突&lt;/li>
&lt;/ul>
&lt;p>重启连接网线到lan口(三个千兆口的任意一个),浏览器输入&lt;code>192.168.1.1&lt;/code>即可进入luci界面,没有密码.&lt;/p>
&lt;p>在System -&amp;gt; Backup / Flash Firmware -&amp;gt; Flash Image&lt;br>
刷入&lt;code>...-squashfs-sysupgrade.bin&lt;/code>&lt;/p>
&lt;p>重启&lt;/p>
&lt;h1 id="参考" >
&lt;div>
&lt;a href="#%e5%8f%82%e8%80%83">
##
&lt;/a>
参考
&lt;/div>
&lt;/h1>
&lt;p>&lt;a href="https://www.bilibili.com/opus/1079010971533443094">小米 AX6000 刷 OpenWrt&lt;/a>&lt;/p></description></item><item><title>OpenWrt设置usb扩容</title><link>/posts/openwrt-set-usb-overlay/</link><pubDate>Mon, 27 Oct 2025 00:00:00 +0000</pubDate><guid>/posts/openwrt-set-usb-overlay/</guid><description>&lt;h1 id="openwrt设置usb扩容" >
&lt;div>
&lt;a href="#openwrt%e8%ae%be%e7%bd%aeusb%e6%89%a9%e5%ae%b9">
##
&lt;/a>
OpenWrt设置usb扩容
&lt;/div>
&lt;/h1>
&lt;p>&lt;a href="https://openwrt.org/docs/guide-user/additional-software/extroot_configuration">原文&lt;/a>&lt;/p>
&lt;h2 id="连接ssh" >
&lt;div>
&lt;a href="#%e8%bf%9e%e6%8e%a5ssh">
#
&lt;/a>
连接SSH
&lt;/div>
&lt;/h2>
&lt;h2 id="安装软件包" >
&lt;div>
&lt;a href="#%e5%ae%89%e8%a3%85%e8%bd%af%e4%bb%b6%e5%8c%85">
#
&lt;/a>
安装软件包
&lt;/div>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>opkg update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opkg install block-mount kmod-fs-ext4 e2fsprogs parted kmod-usb-storage
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="查看usb设备位置" >
&lt;div>
&lt;a href="#%e6%9f%a5%e7%9c%8busb%e8%ae%be%e5%a4%87%e4%bd%8d%e7%bd%ae">
#
&lt;/a>
查看USB设备位置
&lt;/div>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ls -l /sys/block
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>如果是无线路由器只有一个外接存储，大概率是&lt;code>sda&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>lrwxrwxrwx &lt;span style="color:#ae81ff">1&lt;/span> root root &lt;span style="color:#ae81ff">0&lt;/span> xxx xx xx:xx sda -&amp;gt; ../devices/xxx/block/sda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="在usb上创建分区格式化设置exroot并自动挂载" >
&lt;div>
&lt;a href="#%e5%9c%a8usb%e4%b8%8a%e5%88%9b%e5%bb%ba%e5%88%86%e5%8c%ba%e6%a0%bc%e5%bc%8f%e5%8c%96%e8%ae%be%e7%bd%aeexroot%e5%b9%b6%e8%87%aa%e5%8a%a8%e6%8c%82%e8%bd%bd">
#
&lt;/a>
在USB上创建分区，格式化，设置exroot并自动挂载
&lt;/div>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#Partitioning and formatting&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DISK&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;/dev/sda&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>parted -s &lt;span style="color:#e6db74">${&lt;/span>DISK&lt;span style="color:#e6db74">}&lt;/span> -- mklabel gpt mkpart extroot 2048s -2048s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DEVICE&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>DISK&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkfs.ext4 -L extroot &lt;span style="color:#e6db74">${&lt;/span>DEVICE&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#Configuring extroot&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>eval &lt;span style="color:#66d9ef">$(&lt;/span>block info &lt;span style="color:#e6db74">${&lt;/span>DEVICE&lt;span style="color:#e6db74">}&lt;/span> | grep -o -e &lt;span style="color:#e6db74">&amp;#39;UUID=&amp;#34;\S*&amp;#34;&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>eval &lt;span style="color:#66d9ef">$(&lt;/span>block info | grep -o -e &lt;span style="color:#e6db74">&amp;#39;MOUNT=&amp;#34;\S*/overlay&amp;#34;&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uci -q delete fstab.extroot
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uci set fstab.extroot&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;mount&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uci set fstab.extroot.uuid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>UUID&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uci set fstab.extroot.target&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>MOUNT&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uci commit fstab
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#Configuring rootfs_data / ubifs&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ORIG&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>block info | sed -n -e &lt;span style="color:#e6db74">&amp;#39;/MOUNT=&amp;#34;\S*\/overlay&amp;#34;/s/:\s.*$//p&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uci -q delete fstab.rwm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uci set fstab.rwm&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;mount&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uci set fstab.rwm.device&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>ORIG&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uci set fstab.rwm.target&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;/rwm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uci commit fstab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>按y，一路回车&lt;/p>
&lt;h2 id="复制内置闪存的文件" >
&lt;div>
&lt;a href="#%e5%a4%8d%e5%88%b6%e5%86%85%e7%bd%ae%e9%97%aa%e5%ad%98%e7%9a%84%e6%96%87%e4%bb%b6">
#
&lt;/a>
复制内置闪存的文件
&lt;/div>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>mount &lt;span style="color:#e6db74">${&lt;/span>DEVICE&lt;span style="color:#e6db74">}&lt;/span> /mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar -C &lt;span style="color:#e6db74">${&lt;/span>MOUNT&lt;span style="color:#e6db74">}&lt;/span> -cvf - . | tar -C /mnt -xf -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>此时检查software的可用容量应该是U盘的容量了&lt;/p>
&lt;ul>
&lt;li>实测直接拔掉U盘重启就会自动使用内置的闪存启动,不需要任何配置&lt;/li>
&lt;li>安装系统更新不确定会发生什么,最好不要这么做&lt;/li>
&lt;/ul></description></item><item><title>OpenWrt 修改Kernel Hash安装官方源kmod-ipk</title><link>/posts/openwrt-change-kernel-hash/</link><pubDate>Tue, 01 Jul 2025 00:00:00 +0000</pubDate><guid>/posts/openwrt-change-kernel-hash/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>vi /usr/lib/opkg/status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># replace hash_a by hash_b&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>:%s/hash_a/hash_b/g
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>hash_a 是 /usr/lib/opkg/status 里的hash值&lt;br>
hash_b 是安装ipk报错时提示的hash值&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># save&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>:wq
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>